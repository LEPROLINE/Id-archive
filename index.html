<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Idéarchive Test Auth</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

  <h1>Idéarchive - Test Auth</h1>

  <input id="email" type="email" placeholder="Email">
  <input id="password" type="password" placeholder="Mot de passe">
  <br><br>
  <button onclick="signUp()">Créer un compte</button>
  <button onclick="signIn()">Se connecter</button>

  <script>
    // URL et clé Supabase
    const supabaseUrl = 'https://uqhdnanixbeqhxqeuoyr.supabase.co';
    const supabaseKey = 'sb_publishable_DX9r-MlcrNa7nID6oluqNg_9D72CwD4';
    const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

    async function signUp() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;

      try {
        const { data, error } = await supabaseClient.auth.signUp({ email, password });
        if (error) throw error;
        alert("Compte créé ! Tu peux maintenant te connecter.");
        console.log(data);
      } catch (err) {
        alert("Erreur : " + err.message);
        console.error(err);
      }
    }

    async function signIn() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;

      try {
        const { data, error } = await supabaseClient.auth.signInWithPassword({ email, password });
        if (error) throw error;
        alert("Connecté !");
        console.log(data);
      } catch (err) {
        alert("Erreur : " + err.message);
        console.error(err);
      }
    }
  </script>

</body>
</html>
