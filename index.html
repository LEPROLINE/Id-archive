<script>
  // Remplace par ton URL Supabase et ta clé anon
  const supabaseUrl = 'https://ton-projet.supabase.co';
  const supabaseKey = 'sb_publishable_DX9r-MlcrNa7nID6oluqNg_9D72CwD4';
  const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

  // CREER UN COMPTE
  async function signUp() {
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;

    const { user, error } = await supabaseClient.auth.signUp({
      email: email,
      password: password,
    });

    if (error) alert(error.message);
    else alert("Compte créé, vérifie ton email !");
  }

  // SE CONNECTER
  async function signIn() {
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;

    const { user, error } = await supabaseClient.auth.signIn({
      email: email,
      password: password,
    });

    if (error) alert(error.message);
    else alert("Connecté !");
  }

  // AJOUTER UN CONCEPT (uniquement si connecté)
  async function addConcept() {
    const user = supabaseClient.auth.user();
    if (!user) { 
      alert("Connecte-toi d'abord"); 
      return; 
    }

    const title = document.getElementById('title').value;
    const description = document.getElementById('description').value;

    const { data, error } = await supabaseClient
      .from('concepts')
      .insert([{ title: title, description: description, author_id: user.id }]);

    if (error) alert(error.message);
    else alert("Concept ajouté !");
  }
</script>
